<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Arbejdskort – Bredsgaard</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header class="container">
    <div class="card">
      <h1>Arbejdskort</h1>
      <p class="note">Alt i én side – udfyld, gem og se historik. Ingen login eller database.</p>
    </div>
  </header>

  <main class="container">
    <!-- Nyt arbejdskort -->
    <section class="card">
      <h2>Nyt arbejdskort</h2>
      <form id="arbejdskortForm">
        <div class="row">
          <div>
            <label for="navn">Navn</label>
            <input id="navn" type="text" required>
          </div>
          <div>
            <label for="dato">Dato</label>
            <input id="dato" type="date" required>
          </div>
        </div>
        <label for="opgave">Opgave</label>
        <textarea id="opgave" placeholder="Beskriv opgaven..."></textarea>

        <div class="toolbar" style="margin-top:12px">
          <button type="submit" class="btn">Gem arbejdskort</button>
          <button type="button" id="sendEmail" class="btn ghost">Send som email</button>
          <button type="button" id="clearForm" class="btn ghost">Nulstil</button>
        </div>
      </form>
    </section>

    <!-- Historik -->
    <section class="card">
      <h2>Tidligere arbejdskort</h2>
      <table class="table" id="historyTable">
        <thead>
          <tr><th>Dato</th><th>Navn</th><th>Opgave</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </main>

  <footer class="container footer">
    <div class="card">
      <a href="admin.html" class="btn ghost">Admin</a>
      <span>© Bredsgaard A/S</span>
    </div>
  </footer>

  <div id="toast" class="toast">Gemt</div>

  <script>
    const KEY = "arbejdskort_history";
    const $ = (s, r=document) => r.querySelector(s);
    const toast = (m="Gemt") => { const t=$("#toast"); t.textContent=m; t.classList.add("show"); setTimeout(()=>t.classList.remove("show"),1500); };

    const loadHistory = () => JSON.parse(localStorage.getItem(KEY)||"[]");
    const saveHistory = (data) => localStorage.setItem(KEY, JSON.stringify(data));

    function renderHistory(){
      const list = loadHistory();
      const tbody = $("#historyTable tbody");
      tbody.innerHTML = "";
      list.forEach(item=>{
        const tr=document.createElement("tr");
        tr.innerHTML=`<td>${item.dato}</td><td>${item.navn}</td><td>${item.opgave}</td>`;
        tbody.appendChild(tr);
      });
    }

    document.addEventListener("DOMContentLoaded",()=>{
      renderHistory();

      $("#arbejdskortForm").addEventListener("submit", e=>{
        e.preventDefault();
        const navn=$("#navn").value.trim();
        const dato=$("#dato").value;
        const opgave=$("#opgave").value.trim();
        if(!navn||!dato)return alert("Udfyld navn og dato");

        const list = loadHistory();
        list.unshift({navn,dato,opgave});
        saveHistory(list);
        renderHistory();
        toast("Arbejdskort gemt");
        e.target.reset();
      });

      $("#clearForm").onclick=()=>$("#arbejdskortForm").reset();

      $("#sendEmail").onclick=()=>{
        const subject="Nyt arbejdskort";
        const body=`Navn: ${$("#navn").value}%0ADato: ${$("#dato").value}%0AOpgave:%0A${$("#opgave").value}`;
        window.location.href=`mailto:?subject=${subject}&body=${body}`;
      };
    });
  </script>
</body>
</html>







