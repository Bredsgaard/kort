<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Â· Arbejdskort â€“ Bredsgaard</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="container">
    <div class="card">
      <h1>Admin Â· Arbejdskort</h1>
      <p class="note">Lokal demo-admin. Alt gemmes i din browser (LocalStorage).</p>
      <a class="btn ghost" href="index.html">âŸµ Til forsiden</a>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <h2>App-indstillinger</h2>
      <form id="settingsForm">
        <div class="row">
          <div>
            <label for="company">Firmanavn</label>
            <input id="company" type="text" placeholder="Bredsgaard A/S" />
          </div>
          <div>
            <label for="accent">Accentfarve</label>
            <input id="accent" type="color" value="#1f7a4f" />
          </div>
        </div>
        <div class="row">
          <div>
            <label for="defaultEmail">Standard-email</label>
            <input id="defaultEmail" type="email" placeholder="info@bredsgaard.dk" />
          </div>
          <div>
            <label for="footerText">Footer-tekst</label>
            <input id="footerText" type="text" placeholder="Â© Bredsgaard A/S" />
          </div>
        </div>
        <div style="margin-top:12px">
          <button class="btn" type="submit">Gem indstillinger</button>
          <button class="btn ghost" type="button" id="resetTheme">Nulstil farver</button>
        </div>
      </form>
    </section>

    <section class="card">
      <h2>Data & vedligehold</h2>
      <div class="toolbar">
        <button class="btn" id="exportBtn">EksportÃ©r som JSON</button>
        <label class="pill" for="importFile">ðŸ“¥ ImportÃ©r JSON
          <input id="importFile" type="file" accept="application/json" style="display:none" />
        </label>
        <button class="btn ghost" id="clearHistoryBtn">Slet historik</button>
        <button class="btn ghost" id="factoryResetBtn">Fabriksnulstil</button>
      </div>
    </section>

    <section class="card">
      <h2>Status</h2>
      <p class="note">Elementer i historik: <strong id="historyCount">0</strong></p>
      <p class="note">Sidst gemt: <strong id="lastSaved">â€“</strong></p>
    </section>
  </main>

  <footer class="container footer">
    <div class="card">
      <span id="footerLegal">Â© Bredsgaard A/S</span>
      <span class="note">Lokal demo â€“ ingen server / database</span>
    </div>
  </footer>

  <div id="toast" class="toast">Gemt</div>

  <script>
    const KEYS = { settings:'arbejdskort_settings', history:'arbejdskort_history' };
    const $ = (s, r=document) => r.querySelector(s);
    const toast = (msg='Gemt') => { const t=$('#toast'); t.textContent=msg; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),1500); };

    const load = (k) => JSON.parse(localStorage.getItem(k)||'{}');
    const save = (k,v) => localStorage.setItem(k, JSON.stringify(v));

    document.addEventListener('DOMContentLoaded',()=>{
      const s = load(KEYS.settings);
      $('#company').value = s.company || 'Bredsgaard A/S';
      $('#accent').value = s.accent || '#1f7a4f';
      $('#defaultEmail').value = s.defaultEmail || 'info@bredsgaard.dk';
      $('#footerText').value = s.footerText || 'Â© Bredsgaard A/S';

      $('#settingsForm').addEventListener('submit',e=>{
        e.preventDefault();
        save(KEYS.settings,{
          company:$('#company').value,
          accent:$('#accent').value,
          defaultEmail:$('#defaultEmail').value,
          footerText:$('#footerText').value,
          _updatedAt:new Date().toISOString()
        });
        document.documentElement.style.setProperty('--accent',$('#accent').value);
        toast('Indstillinger gemt');
      });

      $('#resetTheme').onclick=()=>{
        document.documentElement.style.setProperty('--accent','#1f7a4f');
        toast('Farver nulstillet');
      };

      $('#exportBtn').onclick=()=>{
        const data={settings:load(KEYS.settings),history:JSON.parse(localStorage.getItem(KEYS.history)||'[]')};
        const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
        const a=document.createElement('a');
        a.href=URL.createObjectURL(blob);
        a.download='arbejdskort_backup.json';
        a.click();
      };

      $('#importFile').onchange=async(e)=>{
        const f=e.target.files[0]; if(!f)return;
        const text=await f.text();
        try{const j=JSON.parse(text); if(j.settings)save(KEYS.settings,j.settings); if(j.history)localStorage.setItem(KEYS.history,JSON.stringify(j.history)); toast('Importeret'); location.reload();}catch{alert('Fejl ved import.');}
      };

      $('#clearHistoryBtn').onclick=()=>{if(confirm('Slet historik?')){localStorage.setItem(KEYS.history,'[]');toast('Historik slettet');}};
      $('#factoryResetBtn').onclick=()=>{if(confirm('Nulstil alt?')){localStorage.clear();location.reload();}};

      const h=JSON.parse(localStorage.getItem(KEYS.history)||'[]');
      $('#historyCount').textContent=h.length;
      $('#lastSaved').textContent=s._updatedAt ? new Date(s._updatedAt).toLocaleString() : 'â€“';
    });
  </script>
</body>
</html>






