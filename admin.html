<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Admin – Arbejdskort</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <!-- TOPBAR -->
  <header class="topbar">
    <div class="container bar">
      <div class="brand">Arbejdskort</div>
      <nav class="nav">
        <a class="nav-link" href="index.html">Nyt arbejdskort</a>
        <a class="nav-link" href="history.html">Tidligere kort</a>
        <a class="nav-link active" href="admin.html">Admin</a>
      </nav>
    </div>
  </header>

  <!-- INDHOLD -->
  <main class="container">
    <section class="card" aria-labelledby="admTitle">
      <h1 class="card-title" id="admTitle">Admin adgang</h1>

      <p class="subtle" style="margin-top:-6px">
        Log ind for at administrere brugere, arbejdstyper og forbrugsliste.
      </p>

      <form id="admin-login" class="form-grid" autocomplete="off">
        <div class="field">
          <label for="admUser">Admin-brugernavn</label>
          <input id="admUser" class="input" type="text"
                placeholder="Brugernavn" inputmode="text" autocomplete="username">
        </div>

        <div class="field">
          <label for="admPin">Admin-kode</label>
          <input id="admPin" class="input" type="password"
                placeholder="••••" inputmode="numeric" autocomplete="current-password">
        </div>

        <div class="actions">
          <button type="submit" class="btn btn-primary">Lås op</button>
          <button type="button" class="btn btn-ghost" id="admClear">Ryd</button>
        </div>
      </form>

      <p id="admMsg" class="subtle" style="margin-top:12px;"></p>
    </section>
  </main>

  <footer class="footer">© Bredsgaard A/S</footer>

  <script>
    // UI-venlig login-håndtering (kun frontend)
    const $ = (q)=>document.querySelector(q);
    $('#admUser').value=''; $('#admPin').value='';

    $('#admClear').addEventListener('click', ()=>{
      $('#admUser').value=''; $('#admPin').value=''; $('#admUser').focus();
      $('#admMsg').textContent='';
    });

    // Markér aktivt menupunkt, hvis filnavn matcher
    (function markActive(){
      const here = location.pathname.split('/').pop() || 'index.html';
      document.querySelectorAll('.nav-link').forEach(a=>{
        if(a.getAttribute('href')===here){ a.classList.add('active'); }
      });
    })();

    // Indsæt din rigtige /api/login-logik her; nedenfor er kun UI-stub
    document.getElementById('admin-login').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const user = $('#admUser').value.trim();
      const pin  = $('#admPin').value.trim();

      if(!user || !pin){
        $('#admMsg').textContent = 'Udfyld både brugernavn og kode.';
        return;
      }

      try{
        // Eksempel (tilpas til din API):
        // const r = await fetch('/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user, pin})});
        // const ok = r.ok;
        const ok = true; // <- fjern når du kobler på din backend
        if(ok){
          sessionStorage.setItem('admUser', user);
          sessionStorage.setItem('admAuth', '1');
          $('#admMsg').textContent = 'Logget ind. Indlæs admin-panel…';
          // location.href = 'admin.html#panel';
        }else{
          $('#admMsg').textContent = 'Forkert brugernavn/kode.';
        }
      }catch(err){
        $('#admMsg').textContent = 'Der opstod en fejl under login.';
      }
    });
  </script>
</body>
</html>
