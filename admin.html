<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Â· Arbejdskort â€“ Bredsgaard</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header class="container">
    <div class="card">
      <h1>Admin Â· Arbejdskort</h1>
      <p class="note">Alt gemmes lokalt i din browser (LocalStorage).</p>
      <a class="btn ghost" href="index.html">âŸµ Til forsiden</a>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <h2>DatahÃ¥ndtering</h2>
      <div class="toolbar">
        <button class="btn" id="exportBtn">EksportÃ©r som JSON</button>
        <label class="pill" for="importFile">ðŸ“¥ ImportÃ©r JSON
          <input id="importFile" type="file" accept="application/json" style="display:none">
        </label>
        <button class="btn ghost" id="clearBtn">Slet historik</button>
      </div>
    </section>

    <section class="card">
      <h2>Info</h2>
      <p class="note">Antal arbejdskort: <strong id="count">0</strong></p>
    </section>
  </main>

  <footer class="container footer">
    <div class="card">
      <span>Â© Bredsgaard A/S</span>
      <span class="note">Demo uden database</span>
    </div>
  </footer>

  <div id="toast" class="toast">Gemt</div>

  <script>
    const KEY = "arbejdskort_history";
    const $ = (s,r=document)=>r.querySelector(s);
    const toast = (m="OK")=>{const t=$("#toast");t.textContent=m;t.classList.add("show");setTimeout(()=>t.classList.remove("show"),1500);};
    const getHistory=()=>JSON.parse(localStorage.getItem(KEY)||"[]");
    const saveHistory=(a)=>localStorage.setItem(KEY,JSON.stringify(a));

    document.addEventListener("DOMContentLoaded",()=>{
      const update=()=>$("#count").textContent=getHistory().length;
      update();

      $("#exportBtn").onclick=()=>{
        const data=getHistory();
        const blob=new Blob([JSON.stringify(data,null,2)],{type:"application/json"});
        const a=document.createElement("a");
        a.href=URL.createObjectURL(blob);
        a.download="arbejdskort_backup.json";
        a.click();
      };

      $("#importFile").onchange=async(e)=>{
        const f=e.target.files[0];if(!f)return;
        const t=await f.text();try{const d=JSON.parse(t);saveHistory(d);toast("Importeret");update();}catch{alert("Fejl i fil.");}
      };

      $("#clearBtn").onclick=()=>{
        if(confirm("Slet al historik?")){saveHistory([]);toast("Historik slettet");update();}
      };
    });
  </script>
</body>
</html>




